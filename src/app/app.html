<div class="header">
  <h1>Food Ordering App</h1>
</div>

<!-- ================= AUTH ================= -->
<div *ngIf="!currentUser" class="auth">

  <h2>{{ isLoginMode ? 'Login' : 'Sign Up' }}</h2>

  <form (ngSubmit)="isLoginMode ? login() : signUp()">

    <input type="email"
           [(ngModel)]="email"
           name="email"
           placeholder="Email"
           required>

    <input type="password"
           [(ngModel)]="password"
           name="password"
           placeholder="Password"
           required>

    <div *ngIf="!isLoginMode">
      <label>
        <input type="radio"
               [(ngModel)]="role"
               name="role"
               value="customer">
        Customer
      </label>

      <label>
        <input type="radio"
               [(ngModel)]="role"
               name="role"
               value="salesman">
        Salesman
      </label>
    </div>

    <button type="submit">
      {{ isLoginMode ? 'Login' : 'Sign Up' }}
    </button>

  </form>

  <p (click)="toggleMode()" class="toggle">
    {{ isLoginMode ? 'Create account' : 'Already have account? Login' }}
  </p>

</div>

<!-- ================= CUSTOMER VIEW ================= -->
<div *ngIf="currentUser?.role === 'customer'" class="customer">

  <button class="logout" (click)="logout()">Logout</button>

  <h2>Menu</h2>

  <div class="foods">
    <div class="card" *ngFor="let food of foods">
      <h3>{{ food.name }}</h3>
      <p>₹ {{ food.price }}</p>
      <button (click)="addToCart(food)">Add to Cart</button>
    </div>
  </div>

  <div class="cart">
    <h2>Cart</h2>

    <div *ngFor="let item of cart; let i = index">
      {{ item.name }} - ₹ {{ item.price }}
      <button (click)="removeFromCart(i)">Remove</button>
    </div>

    <h3 *ngIf="cart.length > 0">
      Total: ₹ {{ getTotal() }}
    </h3>
  </div>

</div>

<!-- ================= SALESMAN VIEW ================= -->
<div *ngIf="currentUser?.role === 'salesman'" class="salesman">

  <button class="logout" (click)="logout()">Logout</button>

  <h2>Manage Food Items</h2>

  <form (ngSubmit)="editIndex === null ? addFood() : updateFood()">

    <input type="text"
           [(ngModel)]="foodName"
           name="foodName"
           placeholder="Food Name"
           required>

    <input type="number"
           [(ngModel)]="foodPrice"
           name="foodPrice"
           placeholder="Price"
           required>

    <button type="submit">
      {{ editIndex === null ? 'Add Food' : 'Update Food' }}
    </button>
  </form>

  <table>
    <tr>
      <th>Name</th>
      <th>Price</th>
      <th>Actions</th>
    </tr>

    <tr *ngFor="let food of foods; let i = index">
      <td>{{ food.name }}</td>
      <td>₹ {{ food.price }}</td>
      <td>
        <button (click)="editFood(i)">Edit</button>
        <button class="delete"
                (click)="deleteFood(i)">Delete</button>
      </td>
    </tr>
  </table>

</div>
